import{_ as b}from"./AdminLayout-56a638d1.js";import{o as y,c as C,w as e,b as a,f as m,g as d,h as k,q as f,u as c,l as h,m as n,p as o,t as p,G as w,k as S,n as g,s as D,e as I,E as L,a as v,v as V}from"./app-54201836.js";const $=v("div",{class:"mb-5"},[v("h5",{class:"text-h5 font-weight-bold"},"メディア一覧")],-1),U=o("地図表示"),R=o("新規登録"),T=o("選択したメディを削除"),j=o("本当に削除しますか？"),B=o("キャンセル"),F=o("削除"),O={props:{data:{type:Object}},data(){return{headers:[{title:"ID",key:"id",sortable:!1},{title:"メディア名",key:"name",sortable:!1},{title:"投稿者",key:"admin_name",sortable:!1},{title:"投稿日",key:"updated_at",sortable:!1},{title:"種別",key:"type",sortable:!1},{title:"有効",key:"status",sortable:!1},{title:"",key:"action",sortable:!1}],breadcrumbs:[{title:"メディア一覧",disabled:!0}],isLoading:!1,search:null,selectedItems:[],deleteDialog:!1}},mounted(){},methods:{loadItems({page:i,itemsPerPage:t,sortBy:s,search:r}){this.isLoading=!0;var u={page:i,limit:t,sort:s[0]};r&&(u.search=r),this.$inertia.get("/admin/media",u,{preserveState:!0,preserveScroll:!0,onSuccess:()=>{this.isLoading=!1}})},onChangeStatus(i){const t=this;this.isLoading=!0,this.$inertia.post(`/admin/media/${i}/update_status`,{value:3},{onFinish:()=>{t.isLoading=!1,t.show_toast()}})},onRemoveConfirm(){this.deleteDialog=!0},onRemoveSelected(){this.$inertia.post("/admin/media/delete_records",{ids:this.selectedItems},{onFinish:()=>{self.isLoading=!1,self.show_toast()}})}}},z=Object.assign(O,{name:"Index",setup(i){return(t,s)=>{const r=V("v-data-table-footer"),u=V("v-data-table-server");return y(),C(b,null,{default:e(()=>[$,a(g,{class:"pa-4"},{default:e(()=>[a(m,null,{default:e(()=>[a(d,{cols:20},{default:e(()=>[a(k,{modelValue:t.search,"onUpdate:modelValue":s[0]||(s[0]=l=>f(search)?search.value=l:null),label:"Search",variant:"underlined","prepend-inner-icon":"mdi-magnify","hide-details":"",clearable:"","single-line":""},null,8,["modelValue"])]),_:1}),a(d,{cols:"auto"},{default:e(()=>[a(c(h),{href:"/admin/media/preview",as:"div"},{default:e(()=>[a(n,{color:"green","hide-details":""},{default:e(()=>[U]),_:1})]),_:1})]),_:1}),a(d,{cols:"auto"},{default:e(()=>[a(c(h),{href:"/admin/media/create",as:"div"},{default:e(()=>[a(n,{color:"primary","hide-details":""},{default:e(()=>[R]),_:1})]),_:1})]),_:1})]),_:1}),a(u,{modelValue:t.selectedItems,"onUpdate:modelValue":s[1]||(s[1]=l=>f(selectedItems)?selectedItems.value=l:null),items:i.data.data,"items-length":i.data.total,headers:t.headers,search:t.search,class:"elevation-0",loading:t.isLoading,"onUpdate:options":t.loadItems,"show-select":""},{["item.admin_name"]:e(({item:l})=>[o(p(l.raw.admin.name),1)]),["item.updated_at"]:e(({item:l})=>[o(p(t.getYmdHiFromDTS(l.raw.updated_at)),1)]),["item.type"]:e(({item:l})=>[o(p(t.getTextOfOption(t.constant.enums.media_types,l.columns.type)),1)]),["item.status"]:e(({item:l})=>[a(w,{color:"primary",inset:"","hide-details":"",modelValue:l.columns.status,"onUpdate:modelValue":_=>l.columns.status=_,"true-value":1,"false-value":0,onChange:_=>t.onChangeStatus(l.columns.id)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),["item.action"]:e(({item:l})=>[a(c(h),{href:`/admin/media/${l.value}/edit`,as:"button"},{default:e(()=>[a(n,{color:"warning",icon:"mdi-pencil",size:"small"})]),_:2},1032,["href"])]),bottom:e(({item:l})=>[a(m,null,{default:e(()=>[a(d,{cols:"auto"},{default:e(()=>[a(n,{disabled:t.selectedItems.length=0,onClick:t.onRemoveConfirm,color:"red","hide-details":""},{default:e(()=>[T]),_:1},8,["disabled","onClick"])]),_:1}),a(S),a(d,{cols:"auto"},{default:e(()=>[a(r)]),_:1})]),_:1})]),_:2},1032,["modelValue","items","items-length","headers","search","loading","onUpdate:options"])]),_:1}),a(m,{justify:"center"},{default:e(()=>[a(D,{modelValue:t.deleteDialog,"onUpdate:modelValue":s[3]||(s[3]=l=>f(deleteDialog)?deleteDialog.value=l:null),persistent:"",width:"auto"},{default:e(()=>[a(g,null,{default:e(()=>[a(I,null,{default:e(()=>[j]),_:1}),a(L),a(m,{class:"my-0",justify:"center"},{default:e(()=>[a(d,{cols:"auto"},{default:e(()=>[a(n,{onClick:s[2]||(s[2]=l=>t.deleteDialog=!1)},{default:e(()=>[B]),_:1})]),_:1}),a(d,{cols:"auto"},{default:e(()=>[a(n,{color:"red",loading:t.isLoading,text:"",onClick:t.onRemoveSelected},{default:e(()=>[F]),_:1},8,["loading","onClick"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})}}});export{z as default};
