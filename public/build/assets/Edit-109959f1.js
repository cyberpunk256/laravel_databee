import{o as f,c as g,w as m,a as d,b as r,V,d as _,e as b,f as v,g as s,h as t,i as n,j as w,k as y,u as U,l as S,m as u,n as p,p as T,T as k,O as C}from"./app-be450289.js";import{_ as h}from"./AdminLayout-21825aaa.js";import{_ as B}from"./Breadcrumbs-84586d6e.js";import{L as i}from"./leaflet-src-696e8210.js";const L={class:"mb-5"},O=d("h5",{class:"text-h5 font-weight-bold"},"管理者編集",-1),M=d("div",{id:"map",class:"input_map"},null,-1),N={props:["group_options","admin"],data(){return{breadcrumbs:[{title:"管理者一覧",disabled:!1,href:"/admin/admin"},{title:"編集",disabled:!0}],form:k({id:null,group_id:null,name:null,email:null,password:null,role:null,pref:null,init_lat:null,init_long:null}),group_options:[]}},mounted(){const a=this;a.group_options=a.$page.props.group_options,a.form.id=a.admin.id,a.form.role=a.admin.role,a.form.group_id=a.admin.group_id,a.form.name=a.admin.name,a.form.email=a.admin.email,a.form.password=a.admin.password,a.form.pref=a.admin.pref,a.form.init_lat=a.admin.init_lat,a.form.init_long=a.admin.init_long,a.map_default_option=a.constant.map,a.map=i.map("map").setView(a.map_default_option.view,a.map_default_option.zoom),i.tileLayer("http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'Map data &copy; <a href="http://www.osm.org">OpenStreetMap</a>'}).addTo(a.map);const e=i.marker([a.form.init_lat,a.form.init_long],{draggable:!0}).addTo(a.map);e.on("dragstart",function(l){}),e.on("dragend",function(l){var o=e.getLatLng();a.form.init_lat=o.lat,a.form.init_long=o.lng})},methods:{submit(){this.form.patch("/admin/admin/"+this.admin.id,{onSuccess:()=>{C.visit("/admin/admin")}})}}},A=Object.assign(N,{__name:"Edit",setup(a){return(e,l)=>(f(),g(h,null,{default:m(()=>[d("div",L,[O,r(B,{items:e.breadcrumbs,class:"pa-0 mt-1"},null,8,["items"])]),r(T,null,{default:m(()=>[r(V,{onSubmit:_(e.submit,["prevent"])},{default:m(()=>[r(b,null,{default:m(()=>[r(v,null,{default:m(()=>[r(s,{cols:"12",sm:"12",md:"6"},{default:m(()=>[r(t,{modelValue:e.form.name,"onUpdate:modelValue":l[0]||(l[0]=o=>e.form.name=o),label:"名前",variant:"underlined","error-messages":e.form.errors.name},null,8,["modelValue","error-messages"])]),_:1}),r(s,{cols:"12",sm:"12",md:"6"},{default:m(()=>[r(t,{modelValue:e.form.email,"onUpdate:modelValue":l[1]||(l[1]=o=>e.form.email=o),label:"メールアドレス",variant:"underlined",type:"email","error-messages":e.form.errors.email},null,8,["modelValue","error-messages"])]),_:1}),r(s,{cols:"12",sm:"12",md:"6"},{default:m(()=>[r(t,{modelValue:e.form.password,"onUpdate:modelValue":l[2]||(l[2]=o=>e.form.password=o),label:"パースワード",variant:"underlined",type:"password","error-messages":e.form.errors.password},null,8,["modelValue","error-messages"])]),_:1}),r(s,{cols:"12",sm:"12",md:"6"},{default:m(()=>[r(n,{modelValue:e.form.role,"onUpdate:modelValue":l[3]||(l[3]=o=>e.form.role=o),items:e.constant.enums.roles,"item-title":"text","item-value":"value",label:"権限",variant:"underlined","error-messages":e.form.errors.role},null,8,["modelValue","items","error-messages"])]),_:1}),r(s,{cols:"12",sm:"12",md:"6"},{default:m(()=>[r(n,{modelValue:e.form.group_id,"onUpdate:modelValue":l[4]||(l[4]=o=>e.form.group_id=o),items:e.group_options,"item-title":"name","item-value":"id",label:"グループ",variant:"underlined","error-messages":e.form.errors.group_id},null,8,["modelValue","items","error-messages"])]),_:1}),r(s,{cols:"12",sm:"12",md:"6"},{default:m(()=>[r(n,{modelValue:e.form.pref,"onUpdate:modelValue":l[5]||(l[5]=o=>e.form.pref=o),items:e.constant.enums.prefs,"item-title":"text","item-value":"value",label:"エリア",variant:"underlined","error-messages":e.form.errors.pref},null,8,["modelValue","items","error-messages"])]),_:1}),r(s,{cols:"12",sm:"12",md:"6"},{default:m(()=>[r(t,{disabled:"",modelValue:e.form.init_lat,"onUpdate:modelValue":l[6]||(l[6]=o=>e.form.init_lat=o),label:"初期ポジション緯度",variant:"underlined",type:"text","error-messages":e.form.errors.init_lat},null,8,["modelValue","error-messages"])]),_:1}),r(s,{cols:"12",sm:"12",md:"6"},{default:m(()=>[r(t,{disabled:"",modelValue:e.form.init_long,"onUpdate:modelValue":l[7]||(l[7]=o=>e.form.init_long=o),label:"初期ポジション緯度",variant:"underlined",type:"text","error-messages":e.form.errors.init_long},null,8,["modelValue","error-messages"])]),_:1}),r(s,{cols:"12",sm:"12"},{default:m(()=>[M]),_:1})]),_:1})]),_:1}),r(w,null,{default:m(()=>[r(y),r(U(S),{href:"/admin/admin",as:"div"},{default:m(()=>[r(u,{text:""},{default:m(()=>[p("キャンセル")]),_:1})]),_:1}),r(u,{type:"submit",color:"primary"},{default:m(()=>[p("更新")]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1}))}});export{A as default};
