import{_ as y}from"./AdminLayout-375787e6.js";import{o as k,c as V,w as e,b as a,f as m,g as o,h as C,q as _,u as c,l as h,m as n,y as w,p as d,t as f,I,k as S,n as g,s as D,e as $,G as L,a as p,v}from"./app-4d76c4a0.js";const T=p("div",{class:"mb-5"},[p("h5",{class:"text-h5 font-weight-bold"},"メディア一覧")],-1),O=d("地図表示"),R=d("新規登録"),j=d("選択したメディを削除"),B=d("本当に削除しますか？"),F=d("キャンセル"),U=d("削除"),N={props:{data:{type:Object}},data(){return{headers:[{title:"",key:"select",sortable:!1},{title:"ID",key:"id",sortable:!1},{title:"メディア名",key:"name",sortable:!1},{title:"投稿者",key:"admin_name",sortable:!1},{title:"種別",key:"type",sortable:!1},{title:"有効",key:"deleted_at",sortable:!1},{title:"状態",key:"status",sortable:!1},{title:"投稿日",key:"updated_at",sortable:!1},{title:"",key:"action",sortable:!1}],breadcrumbs:[{title:"メディア一覧",disabled:!0}],isLoading:!1,search:null,selectedIds:[],others:[],deleteDialog:!1}},mounted(){},methods:{loadItems({page:l,itemsPerPage:t,sortBy:i,search:r}){this.isLoading=!0;var u={page:l,limit:t,sort:i[0]};r&&(u.search=r),this.$inertia.get("/admin/media",u,{preserveState:!0,preserveScroll:!0,onSuccess:()=>{this.isLoading=!1}})},onChangeStatus(l){const t=this;this.isLoading=!0,this.$inertia.post(`/admin/media/${l}/update_status`,{value:3},{onFinish:()=>{t.isLoading=!1,t.show_toast()}})},onRemoveConfirm(){this.deleteDialog=!0},onRemoveSelected(){this.deleteDialog=!1;const l=this;this.$inertia.post("/admin/media/delete_records",{ids:l.selectedIds},{onFinish:()=>{l.isLoading=!1,l.show_toast()}})},onToggle(l){this.selectedIds.indexOf(l)===-1?this.selectedIds.push(l):this.selectedIds.splice(this.selectedIds.indexOf(l),1)}}},G=Object.assign(N,{name:"Index",setup(l){return(t,i)=>{const r=v("v-data-table-footer"),u=v("v-data-table-server");return k(),V(y,null,{default:e(()=>[T,a(g,{class:"pa-4"},{default:e(()=>[a(m,null,{default:e(()=>[a(o,{cols:20},{default:e(()=>[a(C,{modelValue:t.search,"onUpdate:modelValue":i[0]||(i[0]=s=>_(search)?search.value=s:null),label:"Search",variant:"underlined","prepend-inner-icon":"mdi-magnify","hide-details":"",clearable:"","single-line":""},null,8,["modelValue"])]),_:1}),a(o,{cols:"auto"},{default:e(()=>[a(c(h),{href:"/admin/media/preview",as:"div"},{default:e(()=>[a(n,{color:"green","hide-details":""},{default:e(()=>[O]),_:1})]),_:1})]),_:1}),a(o,{cols:"auto"},{default:e(()=>[a(c(h),{href:"/admin/media/create",as:"div"},{default:e(()=>[a(n,{color:"primary","hide-details":""},{default:e(()=>[R]),_:1})]),_:1})]),_:1})]),_:1}),a(u,{items:l.data.data,"items-length":l.data.total,headers:t.headers,search:t.search,class:"elevation-0",loading:t.isLoading,"onUpdate:options":t.loadItems},{"item.select":e(({item:s})=>[a(w,{"model-value":t.selectedIds.includes(s.raw.id),onClick:b=>t.onToggle(s.raw.id),"hide-details":""},null,8,["model-value","onClick"])]),["item.admin_name"]:e(({item:s})=>[d(f(s.raw.admin.name),1)]),["item.updated_at"]:e(({item:s})=>[d(f(t.getYmdHiFromDTS(s.raw.updated_at)),1)]),["item.type"]:e(({item:s})=>[d(f(t.getTextOfOption(t.constant.enums.media_types,s.raw.type)),1)]),["item.deleted_at"]:e(({item:s})=>[a(I,{color:"primary",inset:"","hide-details":"","model-value":s.raw.deleted_at?0:1,"true-value":1,"false-value":0,onChange:b=>t.onChangeStatus(s.raw.id)},null,8,["model-value","onChange"])]),["item.status"]:e(({item:s})=>[d(f(t.getStatusText(s.raw.status)),1)]),["item.action"]:e(({item:s})=>[a(c(h),{href:`/admin/media/${s.value}/edit`,as:"button"},{default:e(()=>[a(n,{color:"warning",icon:"mdi-pencil",size:"small"})]),_:2},1032,["href"])]),bottom:e(({item:s})=>[a(m,null,{default:e(()=>[a(o,{cols:"auto"},{default:e(()=>[a(n,{disabled:t.selectedIds.length=0,onClick:t.onRemoveConfirm,color:"red","hide-details":""},{default:e(()=>[j]),_:1},8,["disabled","onClick"])]),_:1}),a(S),a(o,{cols:"auto"},{default:e(()=>[a(r)]),_:1})]),_:1})]),_:2},1032,["items","items-length","headers","search","loading","onUpdate:options"])]),_:1}),a(m,{justify:"center"},{default:e(()=>[a(D,{modelValue:t.deleteDialog,"onUpdate:modelValue":i[2]||(i[2]=s=>_(deleteDialog)?deleteDialog.value=s:null),persistent:"",width:"auto"},{default:e(()=>[a(g,null,{default:e(()=>[a($,null,{default:e(()=>[B]),_:1}),a(L),a(m,{class:"my-0",justify:"center"},{default:e(()=>[a(o,{cols:"auto"},{default:e(()=>[a(n,{onClick:i[1]||(i[1]=s=>t.deleteDialog=!1)},{default:e(()=>[F]),_:1})]),_:1}),a(o,{cols:"auto"},{default:e(()=>[a(n,{color:"red",loading:t.isLoading,text:"",onClick:t.onRemoveSelected},{default:e(()=>[U]),_:1},8,["loading","onClick"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})}}});export{G as default};
