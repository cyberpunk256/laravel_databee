import{_ as h}from"./AdminLayout-21825aaa.js";import{o as b,c as V,w as t,b as l,a as u,h as k,k as m,u as f,l as p,m as n,n as i,q as v,t as d,r as g,p as c,s as y,e as w,j as D,f as S}from"./app-be450289.js";const T=u("div",{class:"mb-5"},[u("h5",{class:"text-h5 font-weight-bold"},"管理者一覧")],-1),_={class:"d-flex flex-wrap align-center"},C={props:{data:{type:Object}},data(){return{headers:[{title:"権限",key:"role",sortable:!1},{title:"グループ",key:"group_name",sortable:!1},{title:"名前",key:"name",sortable:!1},{title:"メールアドレス",key:"email",sortable:!1},{title:"都道府県",key:"pref",sortable:!1},{title:"緯度",key:"init_lat",sortable:!1},{title:"緯度",key:"init_long",sortable:!1},{title:"アクション",key:"action",sortable:!1}],breadcrumbs:[{title:"ユーザー一覧",disabled:!0}],isLoadingTable:!1,search:null,deleteDialog:!1,isLoading:!1,deleteId:null}},methods:{loadItems({page:r,itemsPerPage:e,sortBy:s,search:a}){this.isLoadingTable=!0;var o={page:r,limit:e,sort:s[0]};a&&(o.search=a),this.$inertia.get("/admin/admin",o,{preserveState:!0,preserveScroll:!0,onSuccess:()=>{this.isLoadingTable=!1}})},deleteItem(r){this.deleteId=r.value,this.deleteDialog=!0},submitDelete(){this.isLoading=!0,this.$inertia.delete(`/admin/admin/${this.deleteId}`,{preserveState:!0,preserveScroll:!0,onSuccess:()=>{this.isLoading=!1,this.deleteDialog=!1}})}}},$=Object.assign(C,{__name:"Index",setup(r){return(e,s)=>(b(),V(h,null,{default:t(()=>[T,l(c,{class:"pa-4"},{default:t(()=>[u("div",_,[l(k,{modelValue:e.search,"onUpdate:modelValue":s[0]||(s[0]=a=>e.search=a),label:"Search",variant:"underlined","prepend-inner-icon":"mdi-magnify","hide-details":"",clearable:"","single-line":""},null,8,["modelValue"]),l(m),l(f(p),{href:"/admin/admin/create",as:"div"},{default:t(()=>[l(n,{color:"primary"},{default:t(()=>[i("新規登録")]),_:1})]),_:1})]),l(v,{items:r.data.data,"items-length":r.data.total,headers:e.headers,search:e.search,class:"elevation-0",loading:e.isLoadingTable,"onUpdate:options":e.loadItems},{"item.role":t(({item:a})=>[i(d(e.getTextOfOption(e.constant.enums.roles,a.raw.role)),1)]),"item.group_name":t(({item:a})=>[i(d(a.raw.group?a.raw.group.name:null),1)]),"item.pref":t(({item:a})=>[i(d(e.getTextOfOption(e.constant.enums.prefs,a.raw.pref)),1)]),"item.action":t(({item:a})=>[l(f(p),{href:`/admin/admin/${a.value}/edit`,as:"button"},{default:t(()=>[l(g,{color:"warning",icon:"mdi-pencil",size:"small"})]),_:2},1032,["href"]),l(g,{class:"ml-2",color:"error",icon:"mdi-delete",size:"small",onClick:o=>e.deleteItem(a)},null,8,["onClick"])]),_:2},1032,["items","items-length","headers","search","loading","onUpdate:options"])]),_:1}),l(S,{justify:"center"},{default:t(()=>[l(y,{modelValue:e.deleteDialog,"onUpdate:modelValue":s[2]||(s[2]=a=>e.deleteDialog=a),persistent:"",width:"auto"},{default:t(()=>[l(c,null,{default:t(()=>[l(w,null,{default:t(()=>[i("本当に削除しますか？")]),_:1}),l(D,null,{default:t(()=>[l(m),l(n,{color:"error",text:"",onClick:s[1]||(s[1]=a=>e.deleteDialog=!1)},{default:t(()=>[i("キャンセル")]),_:1}),l(n,{color:"primary",loading:e.isLoading,text:"",onClick:e.submitDelete},{default:t(()=>[i("削除")]),_:1},8,["loading","onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}))}});export{$ as default};
