import{_ as g}from"./AdminLayout-0150d9c2.js";import{o as b,c as _,w as t,b as e,a as d,h as v,q as u,k as f,u as m,l as c,m as n,p as o,t as V,r as p,n as h,s as k,e as y,j as D,f as C,v as I}from"./app-5de3646e.js";const S=d("div",{class:"mb-5"},[d("h5",{class:"text-h5 font-weight-bold"},"ユーザー一覧")],-1),w={class:"d-flex flex-wrap align-center"},L=o("新規登録"),T=o("本当に削除しますか？"),$=o("キャンセル"),j=o("削除"),B={name:"PeopleIndex",props:{data:{type:Object}},data(){return{headers:[{title:"名前",key:"name",sortable:!1},{title:"メールアドレス",key:"email",sortable:!1},{title:"都道府県",key:"pref",sortable:!1},{title:"緯度",key:"init_lat",sortable:!1},{title:"緯度",key:"init_long",sortable:!1},{title:"アクション",key:"action",sortable:!1}],breadcrumbs:[{title:"ユーザー一覧",disabled:!0}],isLoadingTable:!1,search:null,deleteDialog:!1,isLoading:!1,deleteId:null}},methods:{loadItems({page:i,itemsPerPage:a,sortBy:s,search:r}){this.isLoadingTable=!0;var l={page:i,limit:a,sort:s[0]};r&&(l.search=r),this.$inertia.get("/admin/user",l,{preserveState:!0,preserveScroll:!0,onSuccess:()=>{this.isLoadingTable=!1}})},deleteItem(i){this.deleteId=i.value,this.deleteDialog=!0},submitDelete(){this.isLoading=!0,this.$inertia.delete(`/admin/user/${this.deleteId}`,{preserveState:!0,preserveScroll:!0,onSuccess:()=>{this.isLoading=!1,this.deleteDialog=!1}})}}},z=Object.assign(B,{setup(i){return(a,s)=>{const r=I("v-data-table-server");return b(),_(g,null,{default:t(()=>[S,e(h,{class:"pa-4"},{default:t(()=>[d("div",w,[e(v,{modelValue:a.search,"onUpdate:modelValue":s[0]||(s[0]=l=>u(search)?search.value=l:null),label:"Search",variant:"underlined","prepend-inner-icon":"mdi-magnify","hide-details":"",clearable:"","single-line":""},null,8,["modelValue"]),e(f),e(m(c),{href:"/admin/user/create",as:"div"},{default:t(()=>[e(n,{color:"primary"},{default:t(()=>[L]),_:1})]),_:1})]),e(r,{items:i.data.data,"items-length":i.data.total,headers:a.headers,search:a.search,class:"elevation-0",loading:a.isLoadingTable,"onUpdate:options":a.loadItems},{["item.pref"]:t(({item:l})=>[o(V(a.getTextOfOption(a.constant.enums.prefs,l.raw.pref)),1)]),["item.action"]:t(({item:l})=>[e(m(c),{href:`/admin/user/${l.value}/edit`,as:"button"},{default:t(()=>[e(p,{color:"warning",icon:"mdi-pencil",size:"small"})]),_:2},1032,["href"]),e(p,{class:"ml-2",color:"error",icon:"mdi-delete",size:"small",onClick:O=>a.deleteItem(l)},null,8,["onClick"])]),_:2},1032,["items","items-length","headers","search","loading","onUpdate:options"])]),_:1}),e(C,{justify:"center"},{default:t(()=>[e(k,{modelValue:a.deleteDialog,"onUpdate:modelValue":s[2]||(s[2]=l=>u(deleteDialog)?deleteDialog.value=l:null),persistent:"",width:"auto"},{default:t(()=>[e(h,null,{default:t(()=>[e(y,null,{default:t(()=>[T]),_:1}),e(D,null,{default:t(()=>[e(f),e(n,{color:"error",text:"",onClick:s[1]||(s[1]=l=>a.deleteDialog=!1)},{default:t(()=>[$]),_:1}),e(n,{color:"primary",loading:a.isLoading,text:"",onClick:a.submitDelete},{default:t(()=>[j]),_:1},8,["loading","onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})}}});export{z as default};
