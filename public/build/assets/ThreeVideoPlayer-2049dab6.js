import{V as v,a as f}from"./gpx-c0f3dc8d.js";import{_}from"./_plugin-vue_export-helper-c27b6911.js";import{o as c,B as g,a as p,b as i,w as r,g as d,m as a,c as u,A as h,f as y,G as k}from"./app-00043a97.js";const w={watch:{},props:["url","capture"],data(){return{panorama:null,isPlaying:!1,progress:0,disabled:!1,step:2,video_url:null}},async mounted(){try{this.video_url=await this.get_video_url(this.url),this.initVideoPlayer()}catch(e){console.log(e)}},methods:{async initVideoPlayer(){const e=this,o=new v({container:this.$refs.vp_wrap,controlBar:!1}),n=new f(this.video_url,{autoplay:!1});o.add(n),this.video=n.getVideoElement(),this.video.addEventListener("timeupdate",function(){var l=e.video.currentTime,t=e.video.duration;e.progress=l/t*100})},onPause(){this.video.pause(),this.isPlaying=!1},async onPlay(){try{await this.video.play(),this.isPlaying=!0}catch(e){console.log(e)}},onRewind(){this.video.currentTime=this.video.currentTime<this.step?0:this.video.currentTime-this.step},onFast(){this.video.currentTime=this.video.duration-this.video.currentTime<this.step?this.video.duration:this.video.currentTime+this.step},onSeekTo(e){const o=e.currentTarget.getBoundingClientRect(),n=e.clientX-o.left,l=o.width,t=n/l*100;this.progress=t;const s=parseInt(t/100*this.video.duration);this.video.currentTime=s}}},C={ref:"vp_wrap",class:"vp_wrap"},V={class:"vp_controls"},P={class:"vp_progress mt-2"};function T(e,o,n,l,t,s){return c(),g("div",C,[p("div",V,[i(y,{justify:"center"},{default:r(()=>[i(d,{cols:"auto"},{default:r(()=>[i(a,{icon:"mdi-rewind",onClick:s.onRewind},null,8,["onClick"])]),_:1}),i(d,{cols:"auto"},{default:r(()=>[t.isPlaying?(c(),u(a,{key:0,icon:"mdi-stop",onClick:s.onPause},null,8,["onClick"])):h("",!0),t.isPlaying?h("",!0):(c(),u(a,{key:1,icon:"mdi-play",onClick:s.onPlay},null,8,["onClick"]))]),_:1}),i(d,{cols:"auto"},{default:r(()=>[i(a,{icon:"mdi-fast-forward",onClick:s.onFast},null,8,["onClick"])]),_:1}),i(d,{cols:"auto"},{default:r(()=>[n.capture?(c(),u(a,{key:0,icon:"mdi-record",onClick:e.onCapture},null,8,["onClick"])):h("",!0)]),_:1})]),_:1}),p("div",P,[i(k,{modelValue:t.progress,"onUpdate:modelValue":o[0]||(o[0]=m=>t.progress=m),onClick:s.onSeekTo,height:10},null,8,["modelValue","onClick"])])])],512)}const x=_(w,[["render",T]]);export{x as T};
