import{_ as g}from"./AdminLayout-9dbfbc2b.js";import{o as _,c as v,w as a,b as e,a as r,h as b,q as u,k as c,u as m,l as h,m as n,z as V,r as f,n as p,s as k,e as w,j as C,f as D,p as d,v as I}from"./app-1164ef07.js";const y=r("div",{class:"mb-5"},[r("h5",{class:"text-h5 font-weight-bold"},"キャプチャー一覧")],-1),L={class:"d-flex flex-wrap align-center"},S=d("新規登録"),T={class:"pa-2"},$=d("本当に削除しますか？"),j=d("キャンセル"),B=d("削除"),U={props:{data:{type:Object}},data(){return{headers:[{title:"名前",key:"user.name",sortable:!1},{title:"キャッチャー",key:"url",sortable:!1},{title:"アクション",key:"action",sortable:!1}],breadcrumbs:[{title:"グループ一覧",disabled:!0}],isLoadingTable:!1,search:null,deleteDialog:!1,isLoading:!1,deleteId:null}},methods:{loadItems({page:i,itemsPerPage:t,sortBy:s,search:o}){this.isLoadingTable=!0;var l={page:i,limit:t,sort:s[0]};o&&(l.search=o),this.$inertia.get("/admin/capture",l,{preserveState:!0,preserveScroll:!0,onSuccess:()=>{this.isLoadingTable=!1}})},deleteItem(i){this.deleteId=i.value,this.deleteDialog=!0},submitDelete(){this.isLoading=!0,this.$inertia.delete(`/admin/capture/${this.deleteId}`,{preserveState:!0,preserveScroll:!0,onSuccess:()=>{this.isLoading=!1,this.deleteDialog=!1}})}}},O=Object.assign(U,{name:"Index",setup(i){return(t,s)=>{const o=I("v-data-table-server");return _(),v(g,null,{default:a(()=>[y,e(p,{class:"pa-4"},{default:a(()=>[r("div",L,[e(b,{modelValue:t.search,"onUpdate:modelValue":s[0]||(s[0]=l=>u(search)?search.value=l:null),label:"Search",variant:"underlined","prepend-inner-icon":"mdi-magnify","hide-details":"",clearable:"","single-line":""},null,8,["modelValue"]),e(c),e(m(h),{href:"/admin/capture/create",as:"div"},{default:a(()=>[e(n,{color:"primary"},{default:a(()=>[S]),_:1})]),_:1})]),e(o,{items:i.data.data,"items-length":i.data.total,headers:t.headers,search:t.search,class:"elevation-0",loading:t.isLoadingTable,"onUpdate:options":t.loadItems},{["item.url"]:a(({item:l})=>[r("div",T,[e(V,{src:t.get_path_url(l.raw.url),width:"auto","max-width":"80","max-height":"80",cover:""},null,8,["src"])])]),["item.action"]:a(({item:l})=>[e(m(h),{href:`/admin/capture/${l.value}/edit`,as:"button"},{default:a(()=>[e(f,{color:"warning",icon:"mdi-pencil",size:"small"})]),_:2},1032,["href"]),e(f,{class:"ml-2",color:"error",icon:"mdi-delete",size:"small",onClick:x=>t.deleteItem(l)},null,8,["onClick"])]),_:2},1032,["items","items-length","headers","search","loading","onUpdate:options"])]),_:1}),e(D,{justify:"center"},{default:a(()=>[e(k,{modelValue:t.deleteDialog,"onUpdate:modelValue":s[2]||(s[2]=l=>u(deleteDialog)?deleteDialog.value=l:null),persistent:"",width:"auto"},{default:a(()=>[e(p,null,{default:a(()=>[e(w,null,{default:a(()=>[$]),_:1}),e(C,null,{default:a(()=>[e(c),e(n,{color:"error",text:"",onClick:s[1]||(s[1]=l=>t.deleteDialog=!1)},{default:a(()=>[j]),_:1}),e(n,{color:"primary",loading:t.isLoading,text:"",onClick:t.submitDelete},{default:a(()=>[B]),_:1},8,["loading","onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})}}});export{O as default};
