import{_ as p}from"./AdminLayout-21825aaa.js";import{o as g,c as b,w as l,b as e,a as d,h as V,k as u,u as m,l as c,m as n,n as r,q as v,y as _,r as f,p as h,s as k,e as w,j as D,f as I}from"./app-be450289.js";const y=d("div",{class:"mb-5"},[d("h5",{class:"text-h5 font-weight-bold"},"キャプチャー一覧")],-1),C={class:"d-flex flex-wrap align-center"},S={class:"pa-2"},L={props:{data:{type:Object}},data(){return{headers:[{title:"名前",key:"user.name",sortable:!1},{title:"キャッチャー",key:"url",sortable:!1},{title:"アクション",key:"action",sortable:!1}],breadcrumbs:[{title:"グループ一覧",disabled:!0}],isLoadingTable:!1,search:null,deleteDialog:!1,isLoading:!1,deleteId:null}},methods:{loadItems({page:i,itemsPerPage:a,sortBy:s,search:t}){this.isLoadingTable=!0;var o={page:i,limit:a,sort:s[0]};t&&(o.search=t),this.$inertia.get("/admin/capture",o,{preserveState:!0,preserveScroll:!0,onSuccess:()=>{this.isLoadingTable=!1}})},deleteItem(i){this.deleteId=i.value,this.deleteDialog=!0},submitDelete(){this.isLoading=!0,this.$inertia.delete(`/admin/capture/${this.deleteId}`,{preserveState:!0,preserveScroll:!0,onSuccess:()=>{this.isLoading=!1,this.deleteDialog=!1}})}}},j=Object.assign(L,{__name:"Index",setup(i){return(a,s)=>(g(),b(p,null,{default:l(()=>[y,e(h,{class:"pa-4"},{default:l(()=>[d("div",C,[e(V,{modelValue:a.search,"onUpdate:modelValue":s[0]||(s[0]=t=>a.search=t),label:"Search",variant:"underlined","prepend-inner-icon":"mdi-magnify","hide-details":"",clearable:"","single-line":""},null,8,["modelValue"]),e(u),e(m(c),{href:"/admin/capture/create",as:"div"},{default:l(()=>[e(n,{color:"primary"},{default:l(()=>[r("新規登録")]),_:1})]),_:1})]),e(v,{items:i.data.data,"items-length":i.data.total,headers:a.headers,search:a.search,class:"elevation-0",loading:a.isLoadingTable,"onUpdate:options":a.loadItems},{"item.url":l(({item:t})=>[d("div",S,[e(_,{src:a.get_file_url(t.raw.url),width:"auto","max-width":"80","max-height":"80",cover:""},null,8,["src"])])]),"item.action":l(({item:t})=>[e(m(c),{href:`/admin/capture/${t.value}/edit`,as:"button"},{default:l(()=>[e(f,{color:"warning",icon:"mdi-pencil",size:"small"})]),_:2},1032,["href"]),e(f,{class:"ml-2",color:"error",icon:"mdi-delete",size:"small",onClick:o=>a.deleteItem(t)},null,8,["onClick"])]),_:2},1032,["items","items-length","headers","search","loading","onUpdate:options"])]),_:1}),e(I,{justify:"center"},{default:l(()=>[e(k,{modelValue:a.deleteDialog,"onUpdate:modelValue":s[2]||(s[2]=t=>a.deleteDialog=t),persistent:"",width:"auto"},{default:l(()=>[e(h,null,{default:l(()=>[e(w,null,{default:l(()=>[r("本当に削除しますか？")]),_:1}),e(D,null,{default:l(()=>[e(u),e(n,{color:"error",text:"",onClick:s[1]||(s[1]=t=>a.deleteDialog=!1)},{default:l(()=>[r("キャンセル")]),_:1}),e(n,{color:"primary",loading:a.isLoading,text:"",onClick:a.submitDelete},{default:l(()=>[r("削除")]),_:1},8,["loading","onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}))}});export{j as default};
