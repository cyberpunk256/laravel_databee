import{_ as b}from"./AdminLayout-a8fd040a.js";import{o as V,c as y,w as e,b as a,f as m,g as d,h as w,q as c,u as h,l as _,m as n,p as o,t as f,I as k,k as C,n as p,s as S,e as D,G as I,a as g,v}from"./app-d9cd9fb9.js";const L=g("div",{class:"mb-5"},[g("h5",{class:"text-h5 font-weight-bold"},"メディア一覧")],-1),$=o("地図表示"),R=o("新規登録"),T=o("選択したメディを削除"),U=o("本当に削除しますか？"),j=o("キャンセル"),B=o("削除"),F={props:{data:{type:Object}},data(){return{headers:[{title:"ID",key:"id",sortable:!1},{title:"メディア名",key:"name",sortable:!1},{title:"投稿者",key:"admin_name",sortable:!1},{title:"種別",key:"type",sortable:!1},{title:"有効",key:"deleted_at",sortable:!1},{title:"状態",key:"status",sortable:!1},{title:"投稿日",key:"updated_at",sortable:!1},{title:"",key:"action",sortable:!1}],breadcrumbs:[{title:"メディア一覧",disabled:!0}],isLoading:!1,search:null,selectedItems:[],deleteDialog:!1}},mounted(){},methods:{loadItems({page:i,itemsPerPage:t,sortBy:s,search:r}){this.isLoading=!0;var u={page:i,limit:t,sort:s[0]};r&&(u.search=r),this.$inertia.get("/admin/media",u,{preserveState:!0,preserveScroll:!0,onSuccess:()=>{this.isLoading=!1}})},onChangeStatus(i){const t=this;this.isLoading=!0,this.$inertia.post(`/admin/media/${i}/update_status`,{value:3},{onFinish:()=>{t.isLoading=!1,t.show_toast()}})},onRemoveConfirm(){this.deleteDialog=!0},onRemoveSelected(){this.$inertia.post("/admin/media/delete_records",{ids:this.selectedItems},{onFinish:()=>{self.isLoading=!1,self.show_toast()}})}}},z=Object.assign(F,{name:"Index",setup(i){return(t,s)=>{const r=v("v-data-table-footer"),u=v("v-data-table-server");return V(),y(b,null,{default:e(()=>[L,a(p,{class:"pa-4"},{default:e(()=>[a(m,null,{default:e(()=>[a(d,{cols:20},{default:e(()=>[a(w,{modelValue:t.search,"onUpdate:modelValue":s[0]||(s[0]=l=>c(search)?search.value=l:null),label:"Search",variant:"underlined","prepend-inner-icon":"mdi-magnify","hide-details":"",clearable:"","single-line":""},null,8,["modelValue"])]),_:1}),a(d,{cols:"auto"},{default:e(()=>[a(h(_),{href:"/admin/media/preview",as:"div"},{default:e(()=>[a(n,{color:"green","hide-details":""},{default:e(()=>[$]),_:1})]),_:1})]),_:1}),a(d,{cols:"auto"},{default:e(()=>[a(h(_),{href:"/admin/media/create",as:"div"},{default:e(()=>[a(n,{color:"primary","hide-details":""},{default:e(()=>[R]),_:1})]),_:1})]),_:1})]),_:1}),a(u,{modelValue:t.selectedItems,"onUpdate:modelValue":s[1]||(s[1]=l=>c(selectedItems)?selectedItems.value=l:null),items:i.data.data,"items-length":i.data.total,headers:t.headers,search:t.search,class:"elevation-0",loading:t.isLoading,"onUpdate:options":t.loadItems,"show-select":""},{["item.admin_name"]:e(({item:l})=>[o(f(l.raw.admin.name),1)]),["item.updated_at"]:e(({item:l})=>[o(f(t.getYmdHiFromDTS(l.raw.updated_at)),1)]),["item.type"]:e(({item:l})=>[o(f(t.getTextOfOption(t.constant.enums.media_types,l.raw.type)),1)]),["item.deleted_at"]:e(({item:l})=>[a(k,{color:"primary",inset:"","hide-details":"","model-value":l.raw.deleted_at?0:1,"true-value":1,"false-value":0,onChange:O=>t.onChangeStatus(l.raw.id)},null,8,["model-value","onChange"])]),["item.status"]:e(({item:l})=>[o(f(t.getStatusText(l.raw.status)),1)]),["item.action"]:e(({item:l})=>[a(h(_),{href:`/admin/media/${l.value}/edit`,as:"button"},{default:e(()=>[a(n,{color:"warning",icon:"mdi-pencil",size:"small"})]),_:2},1032,["href"])]),bottom:e(({item:l})=>[a(m,null,{default:e(()=>[a(d,{cols:"auto"},{default:e(()=>[a(n,{disabled:t.selectedItems.length=0,onClick:t.onRemoveConfirm,color:"red","hide-details":""},{default:e(()=>[T]),_:1},8,["disabled","onClick"])]),_:1}),a(C),a(d,{cols:"auto"},{default:e(()=>[a(r)]),_:1})]),_:1})]),_:2},1032,["modelValue","items","items-length","headers","search","loading","onUpdate:options"])]),_:1}),a(m,{justify:"center"},{default:e(()=>[a(S,{modelValue:t.deleteDialog,"onUpdate:modelValue":s[3]||(s[3]=l=>c(deleteDialog)?deleteDialog.value=l:null),persistent:"",width:"auto"},{default:e(()=>[a(p,null,{default:e(()=>[a(D,null,{default:e(()=>[U]),_:1}),a(I),a(m,{class:"my-0",justify:"center"},{default:e(()=>[a(d,{cols:"auto"},{default:e(()=>[a(n,{onClick:s[2]||(s[2]=l=>t.deleteDialog=!1)},{default:e(()=>[j]),_:1})]),_:1}),a(d,{cols:"auto"},{default:e(()=>[a(n,{color:"red",loading:t.isLoading,text:"",onClick:t.onRemoveSelected},{default:e(()=>[B]),_:1},8,["loading","onClick"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})}}});export{z as default};
