import{_ as g}from"./AdminLayout-21825aaa.js";import{o as V,c as b,w as e,b as a,f as u,g as o,h as v,u as m,l as f,m as n,n as d,q as _,t as h,G as y,k,H as C,p as c,s as w,e as S,E as D,a as p}from"./app-be450289.js";const I=p("div",{class:"mb-5"},[p("h5",{class:"text-h5 font-weight-bold"},"メディア一覧")],-1),L={props:{data:{type:Object}},data(){return{headers:[{title:"ID",key:"id",sortable:!1},{title:"メディア名",key:"name",sortable:!1},{title:"投稿者",key:"admin_name",sortable:!1},{title:"投稿日",key:"updated_at",sortable:!1},{title:"種別",key:"type",sortable:!1},{title:"有効",key:"status",sortable:!1},{title:"",key:"action",sortable:!1}],breadcrumbs:[{title:"メディア一覧",disabled:!0}],isLoading:!1,search:null,selectedItems:[],deleteDialog:!1}},mounted(){},methods:{loadItems({page:i,itemsPerPage:t,sortBy:s,search:l}){this.isLoading=!0;var r={page:i,limit:t,sort:s[0]};l&&(r.search=l),this.$inertia.get("/admin/media",r,{preserveState:!0,preserveScroll:!0,onSuccess:()=>{this.isLoading=!1}})},onChangeStatus(i){const t=this;this.isLoading=!0,this.$inertia.post(`/admin/media/${i}/update_status`,{value:3},{onFinish:()=>{t.isLoading=!1,t.show_toast()}})},onRemoveConfirm(){this.deleteDialog=!0},onRemoveSelected(){this.$inertia.post("/admin/media/delete_records",{ids:this.selectedItems},{onFinish:()=>{self.isLoading=!1,self.show_toast()}})}}},U=Object.assign(L,{__name:"Index",setup(i){return(t,s)=>(V(),b(g,null,{default:e(()=>[I,a(c,{class:"pa-4"},{default:e(()=>[a(u,null,{default:e(()=>[a(o,{cols:20},{default:e(()=>[a(v,{modelValue:t.search,"onUpdate:modelValue":s[0]||(s[0]=l=>t.search=l),label:"Search",variant:"underlined","prepend-inner-icon":"mdi-magnify","hide-details":"",clearable:"","single-line":""},null,8,["modelValue"])]),_:1}),a(o,{cols:"auto"},{default:e(()=>[a(m(f),{href:"/admin/media/preview",as:"div"},{default:e(()=>[a(n,{color:"green","hide-details":""},{default:e(()=>[d("地図表示")]),_:1})]),_:1})]),_:1}),a(o,{cols:"auto"},{default:e(()=>[a(m(f),{href:"/admin/media/create",as:"div"},{default:e(()=>[a(n,{color:"primary","hide-details":""},{default:e(()=>[d("新規登録")]),_:1})]),_:1})]),_:1})]),_:1}),a(_,{modelValue:t.selectedItems,"onUpdate:modelValue":s[1]||(s[1]=l=>t.selectedItems=l),items:i.data.data,"items-length":i.data.total,headers:t.headers,search:t.search,class:"elevation-0",loading:t.isLoading,"onUpdate:options":t.loadItems,"show-select":""},{"item.admin_name":e(({item:l})=>[d(h(l.raw.admin.name),1)]),"item.updated_at":e(({item:l})=>[d(h(t.getYmdHiFromDTS(l.raw.updated_at)),1)]),"item.type":e(({item:l})=>[d(h(t.getTextOfOption(t.constant.enums.media_types,l.columns.type)),1)]),"item.status":e(({item:l})=>[a(y,{color:"primary",inset:"","hide-details":"",modelValue:l.columns.status,"onUpdate:modelValue":r=>l.columns.status=r,"true-value":1,"false-value":0,onChange:r=>t.onChangeStatus(l.columns.id)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),"item.action":e(({item:l})=>[a(m(f),{href:`/admin/media/${l.value}/edit`,as:"button"},{default:e(()=>[a(n,{color:"warning",icon:"mdi-pencil",size:"small"})]),_:2},1032,["href"])]),bottom:e(({item:l})=>[a(u,null,{default:e(()=>[a(o,{cols:"auto"},{default:e(()=>[a(n,{disabled:t.selectedItems.length=0,onClick:t.onRemoveConfirm,color:"red","hide-details":""},{default:e(()=>[d("選択したメディを削除")]),_:1},8,["disabled","onClick"])]),_:1}),a(k),a(o,{cols:"auto"},{default:e(()=>[a(C)]),_:1})]),_:1})]),_:2},1032,["modelValue","items","items-length","headers","search","loading","onUpdate:options"])]),_:1}),a(u,{justify:"center"},{default:e(()=>[a(w,{modelValue:t.deleteDialog,"onUpdate:modelValue":s[3]||(s[3]=l=>t.deleteDialog=l),persistent:"",width:"auto"},{default:e(()=>[a(c,null,{default:e(()=>[a(S,null,{default:e(()=>[d("本当に削除しますか？")]),_:1}),a(D),a(u,{class:"my-0",justify:"center"},{default:e(()=>[a(o,{cols:"auto"},{default:e(()=>[a(n,{onClick:s[2]||(s[2]=l=>t.deleteDialog=!1)},{default:e(()=>[d("キャンセル")]),_:1})]),_:1}),a(o,{cols:"auto"},{default:e(()=>[a(n,{color:"red",loading:t.isLoading,text:"",onClick:t.onRemoveSelected},{default:e(()=>[d("削除")]),_:1},8,["loading","onClick"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}))}});export{U as default};
