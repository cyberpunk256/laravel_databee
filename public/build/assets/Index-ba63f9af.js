import{_ as b}from"./AdminLayout-adc3660e.js";import{o as _,c as v,w as l,b as a,a as u,h as V,q as m,k as f,u as c,l as p,m as r,p as i,t as d,r as g,n as h,s as k,e as y,j as w,f as D,v as C}from"./app-1c141545.js";const I=u("div",{class:"mb-5"},[u("h5",{class:"text-h5 font-weight-bold"},"管理者一覧")],-1),S={class:"d-flex flex-wrap align-center"},T=i("新規登録"),L=i("本当に削除しますか？"),$=i("キャンセル"),O=i("削除"),j={props:{data:{type:Object}},data(){return{headers:[{title:"権限",key:"role",sortable:!1},{title:"グループ",key:"group_name",sortable:!1},{title:"名前",key:"name",sortable:!1},{title:"メールアドレス",key:"email",sortable:!1},{title:"都道府県",key:"pref",sortable:!1},{title:"緯度",key:"init_lat",sortable:!1},{title:"緯度",key:"init_long",sortable:!1},{title:"アクション",key:"action",sortable:!1}],breadcrumbs:[{title:"ユーザー一覧",disabled:!0}],isLoadingTable:!1,search:null,deleteDialog:!1,isLoading:!1,deleteId:null}},methods:{loadItems({page:o,itemsPerPage:t,sortBy:s,search:n}){this.isLoadingTable=!0;var e={page:o,limit:t,sort:s[0]};n&&(e.search=n),this.$inertia.get("/admin/admin",e,{preserveState:!0,preserveScroll:!0,onSuccess:()=>{this.isLoadingTable=!1}})},deleteItem(o){this.deleteId=o.value,this.deleteDialog=!0},submitDelete(){this.isLoading=!0,this.$inertia.delete(`/admin/admin/${this.deleteId}`,{preserveState:!0,preserveScroll:!0,onSuccess:()=>{this.isLoading=!1,this.deleteDialog=!1}})}}},z=Object.assign(j,{name:"Index",setup(o){return(t,s)=>{const n=C("v-data-table-server");return _(),v(b,null,{default:l(()=>[I,a(h,{class:"pa-4"},{default:l(()=>[u("div",S,[a(V,{modelValue:t.search,"onUpdate:modelValue":s[0]||(s[0]=e=>m(search)?search.value=e:null),label:"Search",variant:"underlined","prepend-inner-icon":"mdi-magnify","hide-details":"",clearable:"","single-line":""},null,8,["modelValue"]),a(f),a(c(p),{href:"/admin/admin/create",as:"div"},{default:l(()=>[a(r,{color:"primary"},{default:l(()=>[T]),_:1})]),_:1})]),a(n,{items:o.data.data,"items-length":o.data.total,headers:t.headers,search:t.search,class:"elevation-0",loading:t.isLoadingTable,"onUpdate:options":t.loadItems},{["item.role"]:l(({item:e})=>[i(d(t.getTextOfOption(t.constant.enums.roles,e.raw.role)),1)]),["item.group_name"]:l(({item:e})=>[i(d(e.raw.group?e.raw.group.name:null),1)]),["item.pref"]:l(({item:e})=>[i(d(t.getTextOfOption(t.constant.enums.prefs,e.raw.pref)),1)]),["item.action"]:l(({item:e})=>[a(c(p),{href:`/admin/admin/${e.value}/edit`,as:"button"},{default:l(()=>[a(g,{color:"warning",icon:"mdi-pencil",size:"small"})]),_:2},1032,["href"]),a(g,{class:"ml-2",color:"error",icon:"mdi-delete",size:"small",onClick:B=>t.deleteItem(e)},null,8,["onClick"])]),_:2},1032,["items","items-length","headers","search","loading","onUpdate:options"])]),_:1}),a(D,{justify:"center"},{default:l(()=>[a(k,{modelValue:t.deleteDialog,"onUpdate:modelValue":s[2]||(s[2]=e=>m(deleteDialog)?deleteDialog.value=e:null),persistent:"",width:"auto"},{default:l(()=>[a(h,null,{default:l(()=>[a(y,null,{default:l(()=>[L]),_:1}),a(w,null,{default:l(()=>[a(f),a(r,{color:"error",text:"",onClick:s[1]||(s[1]=e=>t.deleteDialog=!1)},{default:l(()=>[$]),_:1}),a(r,{color:"primary",loading:t.isLoading,text:"",onClick:t.submitDelete},{default:l(()=>[O]),_:1},8,["loading","onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})}}});export{z as default};
