import{o as f,c as g,w as s,a as d,b as o,V,d as _,e as b,f as v,g as m,h as t,i as n,j as w,k as y,u as U,l as h,m as u,n as S,p,T,L as i,O as k}from"./app-68115e54.js";import{_ as C}from"./AdminLayout-8a43b6f1.js";import{_ as B}from"./Breadcrumbs-e181b2e4.js";const L={class:"mb-5"},O=d("h5",{class:"text-h5 font-weight-bold"},"管理者編集",-1),M=d("div",{id:"map",class:"input_map"},null,-1),N=p("キャンセル"),$=p("更新"),j={props:["group_options","admin"],data(){return{breadcrumbs:[{title:"管理者一覧",disabled:!1,href:"/admin/admin"},{title:"編集",disabled:!0}],form:T({id:null,group_id:null,name:null,email:null,password:null,role:null,pref:null,init_lat:null,init_long:null}),group_options:[]}},mounted(){const a=this;a.group_options=a.$page.props.group_options,a.form.id=a.admin.id,a.form.role=a.admin.role,a.form.group_id=a.admin.group_id,a.form.name=a.admin.name,a.form.email=a.admin.email,a.form.password=a.admin.password,a.form.pref=a.admin.pref,a.form.init_lat=a.admin.init_lat,a.form.init_long=a.admin.init_long,a.map_default_option=a.constant.map,a.map=i.map("map").setView(a.map_default_option.view,a.map_default_option.zoom),i.tileLayer("http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'Map data &copy; <a href="http://www.osm.org">OpenStreetMap</a>'}).addTo(a.map);const e=i.marker([a.form.init_lat,a.form.init_long],{draggable:!0}).addTo(a.map);e.on("dragstart",function(l){}),e.on("dragend",function(l){var r=e.getLatLng();a.form.init_lat=r.lat,a.form.init_long=r.lng})},methods:{submit(){this.form.patch("/admin/admin/"+this.admin.id,{onSuccess:()=>{k.visit("/admin/admin")}})}}},E=Object.assign(j,{name:"Edit",setup(a){return(e,l)=>(f(),g(C,null,{default:s(()=>[d("div",L,[O,o(B,{items:e.breadcrumbs,class:"pa-0 mt-1"},null,8,["items"])]),o(S,null,{default:s(()=>[o(V,{onSubmit:_(e.submit,["prevent"])},{default:s(()=>[o(b,null,{default:s(()=>[o(v,null,{default:s(()=>[o(m,{cols:"12",sm:"12",md:"6"},{default:s(()=>[o(t,{modelValue:e.form.name,"onUpdate:modelValue":l[0]||(l[0]=r=>e.form.name=r),label:"名前",variant:"underlined","error-messages":e.form.errors.name},null,8,["modelValue","error-messages"])]),_:1}),o(m,{cols:"12",sm:"12",md:"6"},{default:s(()=>[o(t,{modelValue:e.form.email,"onUpdate:modelValue":l[1]||(l[1]=r=>e.form.email=r),label:"メールアドレス",variant:"underlined",type:"email","error-messages":e.form.errors.email},null,8,["modelValue","error-messages"])]),_:1}),o(m,{cols:"12",sm:"12",md:"6"},{default:s(()=>[o(t,{modelValue:e.form.password,"onUpdate:modelValue":l[2]||(l[2]=r=>e.form.password=r),label:"パースワード",variant:"underlined",type:"password","error-messages":e.form.errors.password},null,8,["modelValue","error-messages"])]),_:1}),o(m,{cols:"12",sm:"12",md:"6"},{default:s(()=>[o(n,{modelValue:e.form.role,"onUpdate:modelValue":l[3]||(l[3]=r=>e.form.role=r),items:e.constant.enums.roles,"item-title":"text","item-value":"value",label:"権限",variant:"underlined","error-messages":e.form.errors.role},null,8,["modelValue","items","error-messages"])]),_:1}),o(m,{cols:"12",sm:"12",md:"6"},{default:s(()=>[o(n,{modelValue:e.form.group_id,"onUpdate:modelValue":l[4]||(l[4]=r=>e.form.group_id=r),items:e.group_options,"item-title":"name","item-value":"id",label:"グループ",variant:"underlined","error-messages":e.form.errors.group_id},null,8,["modelValue","items","error-messages"])]),_:1}),o(m,{cols:"12",sm:"12",md:"6"},{default:s(()=>[o(n,{modelValue:e.form.pref,"onUpdate:modelValue":l[5]||(l[5]=r=>e.form.pref=r),items:e.constant.enums.prefs,"item-title":"text","item-value":"value",label:"エリア",variant:"underlined","error-messages":e.form.errors.pref},null,8,["modelValue","items","error-messages"])]),_:1}),o(m,{cols:"12",sm:"12",md:"6"},{default:s(()=>[o(t,{disabled:"",modelValue:e.form.init_lat,"onUpdate:modelValue":l[6]||(l[6]=r=>e.form.init_lat=r),label:"初期ポジション緯度",variant:"underlined",type:"text","error-messages":e.form.errors.init_lat},null,8,["modelValue","error-messages"])]),_:1}),o(m,{cols:"12",sm:"12",md:"6"},{default:s(()=>[o(t,{disabled:"",modelValue:e.form.init_long,"onUpdate:modelValue":l[7]||(l[7]=r=>e.form.init_long=r),label:"初期ポジション緯度",variant:"underlined",type:"text","error-messages":e.form.errors.init_long},null,8,["modelValue","error-messages"])]),_:1}),o(m,{cols:"12",sm:"12"},{default:s(()=>[M]),_:1})]),_:1})]),_:1}),o(w,null,{default:s(()=>[o(y),o(U(h),{href:"/admin/admin",as:"div"},{default:s(()=>[o(u,{text:""},{default:s(()=>[N]),_:1})]),_:1}),o(u,{type:"submit",color:"primary"},{default:s(()=>[$]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1}))}});export{E as default};
