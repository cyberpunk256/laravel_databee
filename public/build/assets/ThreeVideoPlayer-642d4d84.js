import{V as v,a as _}from"./gpx-b1a0f0ad.js";import{_ as f}from"./_plugin-vue_export-helper-c27b6911.js";import{o as l,B as y,a as m,b as i,w as r,g as c,m as a,c as d,A as u,f as g,G as k}from"./app-7cd9a6a1.js";const w={watch:{},props:["url","capture"],data(){return{viewer:null,panorama:null,video:null,isPlaying:!1,progress:0,disabled:!1,step:2,video_url:null}},async mounted(){try{this.video_url=await this.get_video_url(this.url),this.initVideoPlayer()}catch(e){console.log(e)}},async mounted(){try{this.video_url=await this.get_video_url(this.url),this.initVideoPlayer()}catch(e){console.log(e)}},methods:{async initVideoPlayer(){const e=this;e.viewer=new v({container:this.$refs.vp_wrap,controlBar:!1}),e.panorama=new _(this.video_url,{autoplay:!1}),e.viewer.add(e.panorama),this.video=e.panorama.getVideoElement(),this.video.addEventListener("timeupdate",function(){var t=e.video.currentTime,n=e.video.duration;e.progress=t/n*100})},onPause(){this.video.pause(),this.isPlaying=!1},async onPlay(){try{await this.video.play(),this.isPlaying=!0}catch(e){console.log(e)}},onRewind(){this.video.currentTime=this.video.currentTime<this.step?0:this.video.currentTime-this.step},onFast(){this.video.currentTime=this.video.duration-this.video.currentTime<this.step?this.video.duration:this.video.currentTime+this.step},onSeekTo(e){const t=e.currentTarget.getBoundingClientRect(),n=e.clientX-t.left,h=t.width,o=n/h*100;this.progress=o;const s=parseInt(o/100*this.video.duration);this.video.currentTime=s}}},V={ref:"vp_wrap",class:"vp_wrap"},C={class:"vp_controls"},P={class:"vp_progress mt-2"};function T(e,t,n,h,o,s){return l(),y("div",V,[m("div",C,[i(g,{justify:"center"},{default:r(()=>[i(c,{cols:"auto"},{default:r(()=>[i(a,{icon:"mdi-rewind",onClick:s.onRewind},null,8,["onClick"])]),_:1}),i(c,{cols:"auto"},{default:r(()=>[o.isPlaying?(l(),d(a,{key:0,icon:"mdi-stop",onClick:s.onPause},null,8,["onClick"])):u("",!0),o.isPlaying?u("",!0):(l(),d(a,{key:1,icon:"mdi-play",onClick:s.onPlay},null,8,["onClick"]))]),_:1}),i(c,{cols:"auto"},{default:r(()=>[i(a,{icon:"mdi-fast-forward",onClick:s.onFast},null,8,["onClick"])]),_:1}),i(c,{cols:"auto"},{default:r(()=>[n.capture?(l(),d(a,{key:0,icon:"mdi-record",onClick:e.onCapture},null,8,["onClick"])):u("",!0)]),_:1})]),_:1}),m("div",P,[i(k,{modelValue:o.progress,"onUpdate:modelValue":t[0]||(t[0]=p=>o.progress=p),onClick:s.onSeekTo,height:10},null,8,["modelValue","onClick"])])])],512)}const x=f(w,[["render",T]]);export{x as T};
